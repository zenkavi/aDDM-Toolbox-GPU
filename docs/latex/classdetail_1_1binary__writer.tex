\hypertarget{classdetail_1_1binary__writer}{}\doxysection{detail\+::binary\+\_\+writer$<$ Basic\+Json\+Type, Char\+Type $>$ Class Template Reference}
\label{classdetail_1_1binary__writer}\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}


serialization to CBOR and Message\+Pack values  




{\ttfamily \#include $<$json.\+hpp$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classdetail_1_1binary__writer_a5b4f1bfcd0f3f7b57060c059e008c45b}{binary\+\_\+writer}} (\mbox{\hyperlink{namespacedetail_a160eb5d333fe01b259af32d3d4798a7b}{output\+\_\+adapter\+\_\+t}}$<$ Char\+Type $>$ adapter)
\begin{DoxyCompactList}\small\item\em create a binary writer \end{DoxyCompactList}\item 
void \mbox{\hyperlink{classdetail_1_1binary__writer_a1aae361b7492825979cbb80245b9c0d6}{write\+\_\+bson}} (const Basic\+Json\+Type \&j)
\item 
void \mbox{\hyperlink{classdetail_1_1binary__writer_ae6ab36b61e8ad346e75d9f9abc983d4c}{write\+\_\+cbor}} (const Basic\+Json\+Type \&j)
\item 
void \mbox{\hyperlink{classdetail_1_1binary__writer_adc3dbefa80134d3530a1b3f1c9629586}{write\+\_\+msgpack}} (const Basic\+Json\+Type \&j)
\item 
void \mbox{\hyperlink{classdetail_1_1binary__writer_a972bec9688cbc5673bb482bbe9543e2a}{write\+\_\+ubjson}} (const Basic\+Json\+Type \&j, const bool use\+\_\+count, const bool use\+\_\+type, const bool add\+\_\+prefix=true, const bool use\+\_\+bjdata=false)
\end{DoxyCompactItemize}
\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\footnotesize template$<$typename C  = Char\+Type, enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+signed$<$ C $>$\+::value \&\&std\+::is\+\_\+signed$<$ char $>$\+::value $>$ $\ast$  = nullptr$>$ }\\static constexpr Char\+Type \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\+\_\+char\+\_\+type}} (std\+::uint8\+\_\+t x) noexcept
\item 
{\footnotesize template$<$typename C  = Char\+Type, enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+signed$<$ C $>$\+::value \&\&std\+::is\+\_\+unsigned$<$ char $>$\+::value $>$ $\ast$  = nullptr$>$ }\\static Char\+Type \mbox{\hyperlink{classdetail_1_1binary__writer_a4bc03434de56f9c9afd24702922a7ec8}{to\+\_\+char\+\_\+type}} (std\+::uint8\+\_\+t x) noexcept
\item 
{\footnotesize template$<$typename C  = Char\+Type, enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+unsigned$<$ C $>$\+::value $>$ $\ast$  = nullptr$>$ }\\static constexpr Char\+Type \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\+\_\+char\+\_\+type}} (std\+::uint8\+\_\+t x) noexcept
\item 
{\footnotesize template$<$typename Input\+Char\+Type , typename C  = Char\+Type, enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+signed$<$ C $>$\+::value \&\&std\+::is\+\_\+signed$<$ char $>$\+::value \&\&std\+::is\+\_\+same$<$ char, typename std\+::remove\+\_\+cv$<$ Input\+Char\+Type $>$\+::type $>$\+::value $>$ $\ast$  = nullptr$>$ }\\static constexpr Char\+Type \mbox{\hyperlink{classdetail_1_1binary__writer_a91bfd3642a0f90c295f9ce79c9447be9}{to\+\_\+char\+\_\+type}} (Input\+Char\+Type x) noexcept
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\subsubsection*{template$<$typename Basic\+Json\+Type, typename Char\+Type$>$\newline
class detail\+::binary\+\_\+writer$<$ Basic\+Json\+Type, Char\+Type $>$}

serialization to CBOR and Message\+Pack values 

Definition at line 14992 of file json.\+hpp.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classdetail_1_1binary__writer_a5b4f1bfcd0f3f7b57060c059e008c45b}\label{classdetail_1_1binary__writer_a5b4f1bfcd0f3f7b57060c059e008c45b}} 
\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}!binary\_writer@{binary\_writer}}
\index{binary\_writer@{binary\_writer}!detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}
\doxysubsubsection{\texorpdfstring{binary\_writer()}{binary\_writer()}}
{\footnotesize\ttfamily template$<$typename Basic\+Json\+Type , typename Char\+Type $>$ \\
\mbox{\hyperlink{classdetail_1_1binary__writer}{detail\+::binary\+\_\+writer}}$<$ Basic\+Json\+Type, Char\+Type $>$\+::\mbox{\hyperlink{classdetail_1_1binary__writer}{binary\+\_\+writer}} (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{namespacedetail_a160eb5d333fe01b259af32d3d4798a7b}{output\+\_\+adapter\+\_\+t}}$<$ Char\+Type $>$}]{adapter }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [explicit]}}



create a binary writer 


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em adapter} & output adapter to write to \\
\hline
\end{DoxyParams}


Definition at line 15004 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15004                                                                : oa(std::move(adapter))}
\DoxyCodeLine{15005     \{}
\DoxyCodeLine{15006         \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(oa);}
\DoxyCodeLine{15007     \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classdetail_1_1binary__writer_a91bfd3642a0f90c295f9ce79c9447be9}\label{classdetail_1_1binary__writer_a91bfd3642a0f90c295f9ce79c9447be9}} 
\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}!to\_char\_type@{to\_char\_type}}
\index{to\_char\_type@{to\_char\_type}!detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}
\doxysubsubsection{\texorpdfstring{to\_char\_type()}{to\_char\_type()}\hspace{0.1cm}{\footnotesize\ttfamily [1/4]}}
{\footnotesize\ttfamily template$<$typename Basic\+Json\+Type , typename Char\+Type $>$ \\
template$<$typename Input\+Char\+Type , typename C  = Char\+Type, enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+signed$<$ C $>$\+::value \&\&std\+::is\+\_\+signed$<$ char $>$\+::value \&\&std\+::is\+\_\+same$<$ char, typename std\+::remove\+\_\+cv$<$ Input\+Char\+Type $>$\+::type $>$\+::value $>$ $\ast$  = nullptr$>$ \\
static constexpr Char\+Type \mbox{\hyperlink{classdetail_1_1binary__writer}{detail\+::binary\+\_\+writer}}$<$ Basic\+Json\+Type, Char\+Type $>$\+::to\+\_\+char\+\_\+type (\begin{DoxyParamCaption}\item[{Input\+Char\+Type}]{x }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}, {\ttfamily [noexcept]}}



Definition at line 16777 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{16778     \{}
\DoxyCodeLine{16779         \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{16780     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}\label{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}} 
\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}!to\_char\_type@{to\_char\_type}}
\index{to\_char\_type@{to\_char\_type}!detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}
\doxysubsubsection{\texorpdfstring{to\_char\_type()}{to\_char\_type()}\hspace{0.1cm}{\footnotesize\ttfamily [2/4]}}
{\footnotesize\ttfamily template$<$typename Basic\+Json\+Type , typename Char\+Type $>$ \\
template$<$typename C  = Char\+Type, enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+signed$<$ C $>$\+::value \&\&std\+::is\+\_\+signed$<$ char $>$\+::value $>$ $\ast$  = nullptr$>$ \\
static constexpr Char\+Type \mbox{\hyperlink{classdetail_1_1binary__writer}{detail\+::binary\+\_\+writer}}$<$ Basic\+Json\+Type, Char\+Type $>$\+::to\+\_\+char\+\_\+type (\begin{DoxyParamCaption}\item[{std\+::uint8\+\_\+t}]{x }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}, {\ttfamily [noexcept]}}



Definition at line 16748 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{16749     \{}
\DoxyCodeLine{16750         \textcolor{keywordflow}{return} *\textcolor{keyword}{reinterpret\_cast<}\textcolor{keywordtype}{char}*\textcolor{keyword}{>}(\&x);}
\DoxyCodeLine{16751     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classdetail_1_1binary__writer_a4bc03434de56f9c9afd24702922a7ec8}\label{classdetail_1_1binary__writer_a4bc03434de56f9c9afd24702922a7ec8}} 
\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}!to\_char\_type@{to\_char\_type}}
\index{to\_char\_type@{to\_char\_type}!detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}
\doxysubsubsection{\texorpdfstring{to\_char\_type()}{to\_char\_type()}\hspace{0.1cm}{\footnotesize\ttfamily [3/4]}}
{\footnotesize\ttfamily template$<$typename Basic\+Json\+Type , typename Char\+Type $>$ \\
template$<$typename C  = Char\+Type, enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+signed$<$ C $>$\+::value \&\&std\+::is\+\_\+unsigned$<$ char $>$\+::value $>$ $\ast$  = nullptr$>$ \\
static Char\+Type \mbox{\hyperlink{classdetail_1_1binary__writer}{detail\+::binary\+\_\+writer}}$<$ Basic\+Json\+Type, Char\+Type $>$\+::to\+\_\+char\+\_\+type (\begin{DoxyParamCaption}\item[{std\+::uint8\+\_\+t}]{x }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [noexcept]}}



Definition at line 16755 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{16756     \{}
\DoxyCodeLine{16757         static\_assert(\textcolor{keyword}{sizeof}(std::uint8\_t) == \textcolor{keyword}{sizeof}(CharType), \textcolor{stringliteral}{"{}size of CharType must be equal to std::uint8\_t"{}});}
\DoxyCodeLine{16758         static\_assert(std::is\_trivial<CharType>::value, \textcolor{stringliteral}{"{}CharType must be trivial"{}});}
\DoxyCodeLine{16759         CharType result;}
\DoxyCodeLine{16760         std::memcpy(\&result, \&x, \textcolor{keyword}{sizeof}(x));}
\DoxyCodeLine{16761         \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{16762     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}\label{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}} 
\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}!to\_char\_type@{to\_char\_type}}
\index{to\_char\_type@{to\_char\_type}!detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}
\doxysubsubsection{\texorpdfstring{to\_char\_type()}{to\_char\_type()}\hspace{0.1cm}{\footnotesize\ttfamily [4/4]}}
{\footnotesize\ttfamily template$<$typename Basic\+Json\+Type , typename Char\+Type $>$ \\
template$<$typename C  = Char\+Type, enable\+\_\+if\+\_\+t$<$ std\+::is\+\_\+unsigned$<$ C $>$\+::value $>$ $\ast$  = nullptr$>$ \\
static constexpr Char\+Type \mbox{\hyperlink{classdetail_1_1binary__writer}{detail\+::binary\+\_\+writer}}$<$ Basic\+Json\+Type, Char\+Type $>$\+::to\+\_\+char\+\_\+type (\begin{DoxyParamCaption}\item[{std\+::uint8\+\_\+t}]{x }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}, {\ttfamily [constexpr]}, {\ttfamily [noexcept]}}



Definition at line 16766 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{16767     \{}
\DoxyCodeLine{16768         \textcolor{keywordflow}{return} x;}
\DoxyCodeLine{16769     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classdetail_1_1binary__writer_a1aae361b7492825979cbb80245b9c0d6}\label{classdetail_1_1binary__writer_a1aae361b7492825979cbb80245b9c0d6}} 
\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}!write\_bson@{write\_bson}}
\index{write\_bson@{write\_bson}!detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}
\doxysubsubsection{\texorpdfstring{write\_bson()}{write\_bson()}}
{\footnotesize\ttfamily template$<$typename Basic\+Json\+Type , typename Char\+Type $>$ \\
void \mbox{\hyperlink{classdetail_1_1binary__writer}{detail\+::binary\+\_\+writer}}$<$ Basic\+Json\+Type, Char\+Type $>$\+::write\+\_\+bson (\begin{DoxyParamCaption}\item[{const Basic\+Json\+Type \&}]{j }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em j} & JSON value to serialize \\
\hline
\end{DoxyParams}
\begin{DoxyPrecond}{Precondition}
j.\+type() == \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632aa8cfde6331bd59eb2ac96f8911c4b666}{value\+\_\+t\+::object}} 
\end{DoxyPrecond}


Definition at line 15013 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15014     \{}
\DoxyCodeLine{15015         \textcolor{keywordflow}{switch} (j.type())}
\DoxyCodeLine{15016         \{}
\DoxyCodeLine{15017             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632aa8cfde6331bd59eb2ac96f8911c4b666}{value\_t::object}}:}
\DoxyCodeLine{15018             \{}
\DoxyCodeLine{15019                 write\_bson\_object(*j.m\_data.m\_value.object);}
\DoxyCodeLine{15020                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15021             \}}
\DoxyCodeLine{15022 }
\DoxyCodeLine{15023             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a37a6259cc0c1dae299a7866489dff0bd}{value\_t::null}}:}
\DoxyCodeLine{15024             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632af1f713c9e000f5d3f280adbd124df4f5}{value\_t::array}}:}
\DoxyCodeLine{15025             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632ab45cffe084dd3d20d928bee85e7b0f21}{value\_t::string}}:}
\DoxyCodeLine{15026             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a84e2c64f38f78ba3ea5c905ab5a2da27}{value\_t::boolean}}:}
\DoxyCodeLine{15027             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a5763da164f8659d94a56e29df64b4bcc}{value\_t::number\_integer}}:}
\DoxyCodeLine{15028             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632adce7cc8ec29055c4158828921f2f265e}{value\_t::number\_unsigned}}:}
\DoxyCodeLine{15029             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632ad9966ecb59667235a57b4b999a649eef}{value\_t::number\_float}}:}
\DoxyCodeLine{15030             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a9d7183f16acce70658f686ae7f1a4d20}{value\_t::binary}}:}
\DoxyCodeLine{15031             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a94708897ec9db8647dfe695714c98e46}{value\_t::discarded}}:}
\DoxyCodeLine{15032             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{15033             \{}
\DoxyCodeLine{15034                 \mbox{\hyperlink{json_8hpp_a6c274f6db2e65c1b66c7d41b06ad690f}{JSON\_THROW}}(\mbox{\hyperlink{classdetail_1_1type__error_a2d25372628cf1e09ec67718f4bc42762}{type\_error::create}}(317, \mbox{\hyperlink{namespacedetail_a266fb3d4bf633ad6c506434cc91164da}{concat}}(\textcolor{stringliteral}{"{}to serialize to BSON, top-\/level type must be object, but is "{}}, j.type\_name()), \&j));}
\DoxyCodeLine{15035             \}}
\DoxyCodeLine{15036         \}}
\DoxyCodeLine{15037     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classdetail_1_1binary__writer_ae6ab36b61e8ad346e75d9f9abc983d4c}\label{classdetail_1_1binary__writer_ae6ab36b61e8ad346e75d9f9abc983d4c}} 
\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}!write\_cbor@{write\_cbor}}
\index{write\_cbor@{write\_cbor}!detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}
\doxysubsubsection{\texorpdfstring{write\_cbor()}{write\_cbor()}}
{\footnotesize\ttfamily template$<$typename Basic\+Json\+Type , typename Char\+Type $>$ \\
void \mbox{\hyperlink{classdetail_1_1binary__writer}{detail\+::binary\+\_\+writer}}$<$ Basic\+Json\+Type, Char\+Type $>$\+::write\+\_\+cbor (\begin{DoxyParamCaption}\item[{const Basic\+Json\+Type \&}]{j }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em j} & JSON value to serialize \\
\hline
\end{DoxyParams}


Definition at line 15042 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15043     \{}
\DoxyCodeLine{15044         \textcolor{keywordflow}{switch} (j.type())}
\DoxyCodeLine{15045         \{}
\DoxyCodeLine{15046             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a37a6259cc0c1dae299a7866489dff0bd}{value\_t::null}}:}
\DoxyCodeLine{15047             \{}
\DoxyCodeLine{15048                 oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xF6));}
\DoxyCodeLine{15049                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15050             \}}
\DoxyCodeLine{15051 }
\DoxyCodeLine{15052             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a84e2c64f38f78ba3ea5c905ab5a2da27}{value\_t::boolean}}:}
\DoxyCodeLine{15053             \{}
\DoxyCodeLine{15054                 oa-\/>write\_character(j.m\_data.m\_value.boolean}
\DoxyCodeLine{15055                                     ? \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xF5)}
\DoxyCodeLine{15056                                     : \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xF4));}
\DoxyCodeLine{15057                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15058             \}}
\DoxyCodeLine{15059 }
\DoxyCodeLine{15060             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a5763da164f8659d94a56e29df64b4bcc}{value\_t::number\_integer}}:}
\DoxyCodeLine{15061             \{}
\DoxyCodeLine{15062                 \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer >= 0)}
\DoxyCodeLine{15063                 \{}
\DoxyCodeLine{15064                     \textcolor{comment}{// CBOR does not differentiate between positive signed}}
\DoxyCodeLine{15065                     \textcolor{comment}{// integers and unsigned integers. Therefore, we used the}}
\DoxyCodeLine{15066                     \textcolor{comment}{// code from the value\_t::number\_unsigned case here.}}
\DoxyCodeLine{15067                     \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer <= 0x17)}
\DoxyCodeLine{15068                     \{}
\DoxyCodeLine{15069                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15070                     \}}
\DoxyCodeLine{15071                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15072                     \{}
\DoxyCodeLine{15073                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x18));}
\DoxyCodeLine{15074                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15075                     \}}
\DoxyCodeLine{15076                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15077                     \{}
\DoxyCodeLine{15078                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x19));}
\DoxyCodeLine{15079                         write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15080                     \}}
\DoxyCodeLine{15081                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15082                     \{}
\DoxyCodeLine{15083                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x1A));}
\DoxyCodeLine{15084                         write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15085                     \}}
\DoxyCodeLine{15086                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{15087                     \{}
\DoxyCodeLine{15088                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x1B));}
\DoxyCodeLine{15089                         write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15090                     \}}
\DoxyCodeLine{15091                 \}}
\DoxyCodeLine{15092                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{15093                 \{}
\DoxyCodeLine{15094                     \textcolor{comment}{// The conversions below encode the sign in the first}}
\DoxyCodeLine{15095                     \textcolor{comment}{// byte, and the value is converted to a positive number.}}
\DoxyCodeLine{15096                     \textcolor{keyword}{const} \textcolor{keyword}{auto} positive\_number = -\/1 -\/ j.m\_data.m\_value.number\_integer;}
\DoxyCodeLine{15097                     \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer >= -\/24)}
\DoxyCodeLine{15098                     \{}
\DoxyCodeLine{15099                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0x20 + positive\_number));}
\DoxyCodeLine{15100                     \}}
\DoxyCodeLine{15101                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (positive\_number <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15102                     \{}
\DoxyCodeLine{15103                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x38));}
\DoxyCodeLine{15104                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(positive\_number));}
\DoxyCodeLine{15105                     \}}
\DoxyCodeLine{15106                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (positive\_number <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15107                     \{}
\DoxyCodeLine{15108                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x39));}
\DoxyCodeLine{15109                         write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(positive\_number));}
\DoxyCodeLine{15110                     \}}
\DoxyCodeLine{15111                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (positive\_number <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15112                     \{}
\DoxyCodeLine{15113                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x3A));}
\DoxyCodeLine{15114                         write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(positive\_number));}
\DoxyCodeLine{15115                     \}}
\DoxyCodeLine{15116                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{15117                     \{}
\DoxyCodeLine{15118                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x3B));}
\DoxyCodeLine{15119                         write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(positive\_number));}
\DoxyCodeLine{15120                     \}}
\DoxyCodeLine{15121                 \}}
\DoxyCodeLine{15122                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15123             \}}
\DoxyCodeLine{15124 }
\DoxyCodeLine{15125             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632adce7cc8ec29055c4158828921f2f265e}{value\_t::number\_unsigned}}:}
\DoxyCodeLine{15126             \{}
\DoxyCodeLine{15127                 \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= 0x17)}
\DoxyCodeLine{15128                 \{}
\DoxyCodeLine{15129                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_unsigned));}
\DoxyCodeLine{15130                 \}}
\DoxyCodeLine{15131                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15132                 \{}
\DoxyCodeLine{15133                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x18));}
\DoxyCodeLine{15134                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_unsigned));}
\DoxyCodeLine{15135                 \}}
\DoxyCodeLine{15136                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15137                 \{}
\DoxyCodeLine{15138                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x19));}
\DoxyCodeLine{15139                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_unsigned));}
\DoxyCodeLine{15140                 \}}
\DoxyCodeLine{15141                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15142                 \{}
\DoxyCodeLine{15143                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x1A));}
\DoxyCodeLine{15144                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_unsigned));}
\DoxyCodeLine{15145                 \}}
\DoxyCodeLine{15146                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{15147                 \{}
\DoxyCodeLine{15148                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x1B));}
\DoxyCodeLine{15149                     write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_unsigned));}
\DoxyCodeLine{15150                 \}}
\DoxyCodeLine{15151                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15152             \}}
\DoxyCodeLine{15153 }
\DoxyCodeLine{15154             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632ad9966ecb59667235a57b4b999a649eef}{value\_t::number\_float}}:}
\DoxyCodeLine{15155             \{}
\DoxyCodeLine{15156                 \textcolor{keywordflow}{if} (std::isnan(j.m\_data.m\_value.number\_float))}
\DoxyCodeLine{15157                 \{}
\DoxyCodeLine{15158                     \textcolor{comment}{// NaN is 0xf97e00 in CBOR}}
\DoxyCodeLine{15159                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xF9));}
\DoxyCodeLine{15160                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x7E));}
\DoxyCodeLine{15161                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x00));}
\DoxyCodeLine{15162                 \}}
\DoxyCodeLine{15163                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (std::isinf(j.m\_data.m\_value.number\_float))}
\DoxyCodeLine{15164                 \{}
\DoxyCodeLine{15165                     \textcolor{comment}{// Infinity is 0xf97c00, -\/Infinity is 0xf9fc00}}
\DoxyCodeLine{15166                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xf9));}
\DoxyCodeLine{15167                     oa-\/>write\_character(j.m\_data.m\_value.number\_float > 0 ? \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x7C) : \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xFC));}
\DoxyCodeLine{15168                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x00));}
\DoxyCodeLine{15169                 \}}
\DoxyCodeLine{15170                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{15171                 \{}
\DoxyCodeLine{15172                     write\_compact\_float(j.m\_data.m\_value.number\_float, \mbox{\hyperlink{namespacedetail_a0ab3b338d0eadc6890b72cccef0ea04faaf9de350d652f0c9055ddab514bd23ea}{detail::input\_format\_t::cbor}});}
\DoxyCodeLine{15173                 \}}
\DoxyCodeLine{15174                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15175             \}}
\DoxyCodeLine{15176 }
\DoxyCodeLine{15177             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632ab45cffe084dd3d20d928bee85e7b0f21}{value\_t::string}}:}
\DoxyCodeLine{15178             \{}
\DoxyCodeLine{15179                 \textcolor{comment}{// step 1: write control byte and the string length}}
\DoxyCodeLine{15180                 \textcolor{keyword}{const} \textcolor{keyword}{auto} \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} = j.m\_data.m\_value.string-\/>size();}
\DoxyCodeLine{15181                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= 0x17)}
\DoxyCodeLine{15182                 \{}
\DoxyCodeLine{15183                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0x60 + \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15184                 \}}
\DoxyCodeLine{15185                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15186                 \{}
\DoxyCodeLine{15187                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x78));}
\DoxyCodeLine{15188                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15189                 \}}
\DoxyCodeLine{15190                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15191                 \{}
\DoxyCodeLine{15192                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x79));}
\DoxyCodeLine{15193                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15194                 \}}
\DoxyCodeLine{15195                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15196                 \{}
\DoxyCodeLine{15197                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x7A));}
\DoxyCodeLine{15198                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15199                 \}}
\DoxyCodeLine{15200                 \textcolor{comment}{// LCOV\_EXCL\_START}}
\DoxyCodeLine{15201                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint64\_t>::max)())}
\DoxyCodeLine{15202                 \{}
\DoxyCodeLine{15203                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x7B));}
\DoxyCodeLine{15204                     write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15205                 \}}
\DoxyCodeLine{15206                 \textcolor{comment}{// LCOV\_EXCL\_STOP}}
\DoxyCodeLine{15207 }
\DoxyCodeLine{15208                 \textcolor{comment}{// step 2: write the string}}
\DoxyCodeLine{15209                 oa-\/>write\_characters(}
\DoxyCodeLine{15210                     \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }CharType*\textcolor{keyword}{>}(j.m\_data.m\_value.string-\/>c\_str()),}
\DoxyCodeLine{15211                     j.m\_data.m\_value.string-\/>size());}
\DoxyCodeLine{15212                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15213             \}}
\DoxyCodeLine{15214 }
\DoxyCodeLine{15215             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632af1f713c9e000f5d3f280adbd124df4f5}{value\_t::array}}:}
\DoxyCodeLine{15216             \{}
\DoxyCodeLine{15217                 \textcolor{comment}{// step 1: write control byte and the array size}}
\DoxyCodeLine{15218                 \textcolor{keyword}{const} \textcolor{keyword}{auto} \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} = j.m\_data.m\_value.array-\/>size();}
\DoxyCodeLine{15219                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= 0x17)}
\DoxyCodeLine{15220                 \{}
\DoxyCodeLine{15221                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0x80 + \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15222                 \}}
\DoxyCodeLine{15223                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15224                 \{}
\DoxyCodeLine{15225                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x98));}
\DoxyCodeLine{15226                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15227                 \}}
\DoxyCodeLine{15228                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15229                 \{}
\DoxyCodeLine{15230                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x99));}
\DoxyCodeLine{15231                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15232                 \}}
\DoxyCodeLine{15233                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15234                 \{}
\DoxyCodeLine{15235                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x9A));}
\DoxyCodeLine{15236                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15237                 \}}
\DoxyCodeLine{15238                 \textcolor{comment}{// LCOV\_EXCL\_START}}
\DoxyCodeLine{15239                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint64\_t>::max)())}
\DoxyCodeLine{15240                 \{}
\DoxyCodeLine{15241                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x9B));}
\DoxyCodeLine{15242                     write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15243                 \}}
\DoxyCodeLine{15244                 \textcolor{comment}{// LCOV\_EXCL\_STOP}}
\DoxyCodeLine{15245 }
\DoxyCodeLine{15246                 \textcolor{comment}{// step 2: write each element}}
\DoxyCodeLine{15247                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& el : *j.m\_data.m\_value.array)}
\DoxyCodeLine{15248                 \{}
\DoxyCodeLine{15249                     \mbox{\hyperlink{classdetail_1_1binary__writer_ae6ab36b61e8ad346e75d9f9abc983d4c}{write\_cbor}}(el);}
\DoxyCodeLine{15250                 \}}
\DoxyCodeLine{15251                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15252             \}}
\DoxyCodeLine{15253 }
\DoxyCodeLine{15254             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a9d7183f16acce70658f686ae7f1a4d20}{value\_t::binary}}:}
\DoxyCodeLine{15255             \{}
\DoxyCodeLine{15256                 \textcolor{keywordflow}{if} (j.m\_data.m\_value.binary-\/>has\_subtype())}
\DoxyCodeLine{15257                 \{}
\DoxyCodeLine{15258                     \textcolor{keywordflow}{if} (j.m\_data.m\_value.binary-\/>subtype() <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15259                     \{}
\DoxyCodeLine{15260                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0xd8));}
\DoxyCodeLine{15261                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.binary-\/>subtype()));}
\DoxyCodeLine{15262                     \}}
\DoxyCodeLine{15263                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.binary-\/>subtype() <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15264                     \{}
\DoxyCodeLine{15265                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0xd9));}
\DoxyCodeLine{15266                         write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(j.m\_data.m\_value.binary-\/>subtype()));}
\DoxyCodeLine{15267                     \}}
\DoxyCodeLine{15268                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.binary-\/>subtype() <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15269                     \{}
\DoxyCodeLine{15270                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0xda));}
\DoxyCodeLine{15271                         write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(j.m\_data.m\_value.binary-\/>subtype()));}
\DoxyCodeLine{15272                     \}}
\DoxyCodeLine{15273                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.binary-\/>subtype() <= (std::numeric\_limits<std::uint64\_t>::max)())}
\DoxyCodeLine{15274                     \{}
\DoxyCodeLine{15275                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0xdb));}
\DoxyCodeLine{15276                         write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(j.m\_data.m\_value.binary-\/>subtype()));}
\DoxyCodeLine{15277                     \}}
\DoxyCodeLine{15278                 \}}
\DoxyCodeLine{15279 }
\DoxyCodeLine{15280                 \textcolor{comment}{// step 1: write control byte and the binary array size}}
\DoxyCodeLine{15281                 \textcolor{keyword}{const} \textcolor{keyword}{auto} \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} = j.m\_data.m\_value.binary-\/>size();}
\DoxyCodeLine{15282                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= 0x17)}
\DoxyCodeLine{15283                 \{}
\DoxyCodeLine{15284                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0x40 + \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15285                 \}}
\DoxyCodeLine{15286                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15287                 \{}
\DoxyCodeLine{15288                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x58));}
\DoxyCodeLine{15289                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15290                 \}}
\DoxyCodeLine{15291                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15292                 \{}
\DoxyCodeLine{15293                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x59));}
\DoxyCodeLine{15294                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15295                 \}}
\DoxyCodeLine{15296                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15297                 \{}
\DoxyCodeLine{15298                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x5A));}
\DoxyCodeLine{15299                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15300                 \}}
\DoxyCodeLine{15301                 \textcolor{comment}{// LCOV\_EXCL\_START}}
\DoxyCodeLine{15302                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint64\_t>::max)())}
\DoxyCodeLine{15303                 \{}
\DoxyCodeLine{15304                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0x5B));}
\DoxyCodeLine{15305                     write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15306                 \}}
\DoxyCodeLine{15307                 \textcolor{comment}{// LCOV\_EXCL\_STOP}}
\DoxyCodeLine{15308 }
\DoxyCodeLine{15309                 \textcolor{comment}{// step 2: write each element}}
\DoxyCodeLine{15310                 oa-\/>write\_characters(}
\DoxyCodeLine{15311                     \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }CharType*\textcolor{keyword}{>}(j.m\_data.m\_value.binary-\/>data()),}
\DoxyCodeLine{15312                     \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}});}
\DoxyCodeLine{15313 }
\DoxyCodeLine{15314                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15315             \}}
\DoxyCodeLine{15316 }
\DoxyCodeLine{15317             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632aa8cfde6331bd59eb2ac96f8911c4b666}{value\_t::object}}:}
\DoxyCodeLine{15318             \{}
\DoxyCodeLine{15319                 \textcolor{comment}{// step 1: write control byte and the object size}}
\DoxyCodeLine{15320                 \textcolor{keyword}{const} \textcolor{keyword}{auto} \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} = j.m\_data.m\_value.object-\/>size();}
\DoxyCodeLine{15321                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= 0x17)}
\DoxyCodeLine{15322                 \{}
\DoxyCodeLine{15323                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0xA0 + \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15324                 \}}
\DoxyCodeLine{15325                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15326                 \{}
\DoxyCodeLine{15327                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xB8));}
\DoxyCodeLine{15328                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15329                 \}}
\DoxyCodeLine{15330                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15331                 \{}
\DoxyCodeLine{15332                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xB9));}
\DoxyCodeLine{15333                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15334                 \}}
\DoxyCodeLine{15335                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15336                 \{}
\DoxyCodeLine{15337                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xBA));}
\DoxyCodeLine{15338                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15339                 \}}
\DoxyCodeLine{15340                 \textcolor{comment}{// LCOV\_EXCL\_START}}
\DoxyCodeLine{15341                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint64\_t>::max)())}
\DoxyCodeLine{15342                 \{}
\DoxyCodeLine{15343                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xBB));}
\DoxyCodeLine{15344                     write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15345                 \}}
\DoxyCodeLine{15346                 \textcolor{comment}{// LCOV\_EXCL\_STOP}}
\DoxyCodeLine{15347 }
\DoxyCodeLine{15348                 \textcolor{comment}{// step 2: write each element}}
\DoxyCodeLine{15349                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& el : *j.m\_data.m\_value.object)}
\DoxyCodeLine{15350                 \{}
\DoxyCodeLine{15351                     \mbox{\hyperlink{classdetail_1_1binary__writer_ae6ab36b61e8ad346e75d9f9abc983d4c}{write\_cbor}}(el.first);}
\DoxyCodeLine{15352                     \mbox{\hyperlink{classdetail_1_1binary__writer_ae6ab36b61e8ad346e75d9f9abc983d4c}{write\_cbor}}(el.second);}
\DoxyCodeLine{15353                 \}}
\DoxyCodeLine{15354                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15355             \}}
\DoxyCodeLine{15356 }
\DoxyCodeLine{15357             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a94708897ec9db8647dfe695714c98e46}{value\_t::discarded}}:}
\DoxyCodeLine{15358             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{15359                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15360         \}}
\DoxyCodeLine{15361     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classdetail_1_1binary__writer_adc3dbefa80134d3530a1b3f1c9629586}\label{classdetail_1_1binary__writer_adc3dbefa80134d3530a1b3f1c9629586}} 
\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}!write\_msgpack@{write\_msgpack}}
\index{write\_msgpack@{write\_msgpack}!detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}
\doxysubsubsection{\texorpdfstring{write\_msgpack()}{write\_msgpack()}}
{\footnotesize\ttfamily template$<$typename Basic\+Json\+Type , typename Char\+Type $>$ \\
void \mbox{\hyperlink{classdetail_1_1binary__writer}{detail\+::binary\+\_\+writer}}$<$ Basic\+Json\+Type, Char\+Type $>$\+::write\+\_\+msgpack (\begin{DoxyParamCaption}\item[{const Basic\+Json\+Type \&}]{j }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em j} & JSON value to serialize \\
\hline
\end{DoxyParams}


Definition at line 15366 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15367     \{}
\DoxyCodeLine{15368         \textcolor{keywordflow}{switch} (j.type())}
\DoxyCodeLine{15369         \{}
\DoxyCodeLine{15370             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a37a6259cc0c1dae299a7866489dff0bd}{value\_t::null}}: \textcolor{comment}{// nil}}
\DoxyCodeLine{15371             \{}
\DoxyCodeLine{15372                 oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xC0));}
\DoxyCodeLine{15373                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15374             \}}
\DoxyCodeLine{15375 }
\DoxyCodeLine{15376             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a84e2c64f38f78ba3ea5c905ab5a2da27}{value\_t::boolean}}: \textcolor{comment}{// true and false}}
\DoxyCodeLine{15377             \{}
\DoxyCodeLine{15378                 oa-\/>write\_character(j.m\_data.m\_value.boolean}
\DoxyCodeLine{15379                                     ? \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xC3)}
\DoxyCodeLine{15380                                     : \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xC2));}
\DoxyCodeLine{15381                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15382             \}}
\DoxyCodeLine{15383 }
\DoxyCodeLine{15384             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a5763da164f8659d94a56e29df64b4bcc}{value\_t::number\_integer}}:}
\DoxyCodeLine{15385             \{}
\DoxyCodeLine{15386                 \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer >= 0)}
\DoxyCodeLine{15387                 \{}
\DoxyCodeLine{15388                     \textcolor{comment}{// MessagePack does not differentiate between positive}}
\DoxyCodeLine{15389                     \textcolor{comment}{// signed integers and unsigned integers. Therefore, we used}}
\DoxyCodeLine{15390                     \textcolor{comment}{// the code from the value\_t::number\_unsigned case here.}}
\DoxyCodeLine{15391                     \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned < 128)}
\DoxyCodeLine{15392                     \{}
\DoxyCodeLine{15393                         \textcolor{comment}{// positive fixnum}}
\DoxyCodeLine{15394                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15395                     \}}
\DoxyCodeLine{15396                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15397                     \{}
\DoxyCodeLine{15398                         \textcolor{comment}{// uint 8}}
\DoxyCodeLine{15399                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xCC));}
\DoxyCodeLine{15400                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15401                     \}}
\DoxyCodeLine{15402                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15403                     \{}
\DoxyCodeLine{15404                         \textcolor{comment}{// uint 16}}
\DoxyCodeLine{15405                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xCD));}
\DoxyCodeLine{15406                         write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15407                     \}}
\DoxyCodeLine{15408                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15409                     \{}
\DoxyCodeLine{15410                         \textcolor{comment}{// uint 32}}
\DoxyCodeLine{15411                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xCE));}
\DoxyCodeLine{15412                         write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15413                     \}}
\DoxyCodeLine{15414                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint64\_t>::max)())}
\DoxyCodeLine{15415                     \{}
\DoxyCodeLine{15416                         \textcolor{comment}{// uint 64}}
\DoxyCodeLine{15417                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xCF));}
\DoxyCodeLine{15418                         write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15419                     \}}
\DoxyCodeLine{15420                 \}}
\DoxyCodeLine{15421                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{15422                 \{}
\DoxyCodeLine{15423                     \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer >= -\/32)}
\DoxyCodeLine{15424                     \{}
\DoxyCodeLine{15425                         \textcolor{comment}{// negative fixnum}}
\DoxyCodeLine{15426                         write\_number(\textcolor{keyword}{static\_cast<}std::int8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15427                     \}}
\DoxyCodeLine{15428                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer >= (std::numeric\_limits<std::int8\_t>::min)() \&\&}
\DoxyCodeLine{15429                              j.m\_data.m\_value.number\_integer <= (std::numeric\_limits<std::int8\_t>::max)())}
\DoxyCodeLine{15430                     \{}
\DoxyCodeLine{15431                         \textcolor{comment}{// int 8}}
\DoxyCodeLine{15432                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xD0));}
\DoxyCodeLine{15433                         write\_number(\textcolor{keyword}{static\_cast<}std::int8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15434                     \}}
\DoxyCodeLine{15435                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer >= (std::numeric\_limits<std::int16\_t>::min)() \&\&}
\DoxyCodeLine{15436                              j.m\_data.m\_value.number\_integer <= (std::numeric\_limits<std::int16\_t>::max)())}
\DoxyCodeLine{15437                     \{}
\DoxyCodeLine{15438                         \textcolor{comment}{// int 16}}
\DoxyCodeLine{15439                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xD1));}
\DoxyCodeLine{15440                         write\_number(\textcolor{keyword}{static\_cast<}std::int16\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15441                     \}}
\DoxyCodeLine{15442                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer >= (std::numeric\_limits<std::int32\_t>::min)() \&\&}
\DoxyCodeLine{15443                              j.m\_data.m\_value.number\_integer <= (std::numeric\_limits<std::int32\_t>::max)())}
\DoxyCodeLine{15444                     \{}
\DoxyCodeLine{15445                         \textcolor{comment}{// int 32}}
\DoxyCodeLine{15446                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xD2));}
\DoxyCodeLine{15447                         write\_number(\textcolor{keyword}{static\_cast<}std::int32\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15448                     \}}
\DoxyCodeLine{15449                     \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_integer >= (std::numeric\_limits<std::int64\_t>::min)() \&\&}
\DoxyCodeLine{15450                              j.m\_data.m\_value.number\_integer <= (std::numeric\_limits<std::int64\_t>::max)())}
\DoxyCodeLine{15451                     \{}
\DoxyCodeLine{15452                         \textcolor{comment}{// int 64}}
\DoxyCodeLine{15453                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xD3));}
\DoxyCodeLine{15454                         write\_number(\textcolor{keyword}{static\_cast<}std::int64\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15455                     \}}
\DoxyCodeLine{15456                 \}}
\DoxyCodeLine{15457                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15458             \}}
\DoxyCodeLine{15459 }
\DoxyCodeLine{15460             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632adce7cc8ec29055c4158828921f2f265e}{value\_t::number\_unsigned}}:}
\DoxyCodeLine{15461             \{}
\DoxyCodeLine{15462                 \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned < 128)}
\DoxyCodeLine{15463                 \{}
\DoxyCodeLine{15464                     \textcolor{comment}{// positive fixnum}}
\DoxyCodeLine{15465                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15466                 \}}
\DoxyCodeLine{15467                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15468                 \{}
\DoxyCodeLine{15469                     \textcolor{comment}{// uint 8}}
\DoxyCodeLine{15470                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xCC));}
\DoxyCodeLine{15471                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15472                 \}}
\DoxyCodeLine{15473                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15474                 \{}
\DoxyCodeLine{15475                     \textcolor{comment}{// uint 16}}
\DoxyCodeLine{15476                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xCD));}
\DoxyCodeLine{15477                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15478                 \}}
\DoxyCodeLine{15479                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15480                 \{}
\DoxyCodeLine{15481                     \textcolor{comment}{// uint 32}}
\DoxyCodeLine{15482                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xCE));}
\DoxyCodeLine{15483                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15484                 \}}
\DoxyCodeLine{15485                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j.m\_data.m\_value.number\_unsigned <= (std::numeric\_limits<std::uint64\_t>::max)())}
\DoxyCodeLine{15486                 \{}
\DoxyCodeLine{15487                     \textcolor{comment}{// uint 64}}
\DoxyCodeLine{15488                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xCF));}
\DoxyCodeLine{15489                     write\_number(\textcolor{keyword}{static\_cast<}std::uint64\_t\textcolor{keyword}{>}(j.m\_data.m\_value.number\_integer));}
\DoxyCodeLine{15490                 \}}
\DoxyCodeLine{15491                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15492             \}}
\DoxyCodeLine{15493 }
\DoxyCodeLine{15494             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632ad9966ecb59667235a57b4b999a649eef}{value\_t::number\_float}}:}
\DoxyCodeLine{15495             \{}
\DoxyCodeLine{15496                 write\_compact\_float(j.m\_data.m\_value.number\_float, \mbox{\hyperlink{namespacedetail_a0ab3b338d0eadc6890b72cccef0ea04fac40d516627022a54003ac2b74a82688a}{detail::input\_format\_t::msgpack}});}
\DoxyCodeLine{15497                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15498             \}}
\DoxyCodeLine{15499 }
\DoxyCodeLine{15500             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632ab45cffe084dd3d20d928bee85e7b0f21}{value\_t::string}}:}
\DoxyCodeLine{15501             \{}
\DoxyCodeLine{15502                 \textcolor{comment}{// step 1: write control byte and the string length}}
\DoxyCodeLine{15503                 \textcolor{keyword}{const} \textcolor{keyword}{auto} \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} = j.m\_data.m\_value.string-\/>size();}
\DoxyCodeLine{15504                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= 31)}
\DoxyCodeLine{15505                 \{}
\DoxyCodeLine{15506                     \textcolor{comment}{// fixstr}}
\DoxyCodeLine{15507                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0xA0 | \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15508                 \}}
\DoxyCodeLine{15509                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15510                 \{}
\DoxyCodeLine{15511                     \textcolor{comment}{// str 8}}
\DoxyCodeLine{15512                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xD9));}
\DoxyCodeLine{15513                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15514                 \}}
\DoxyCodeLine{15515                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15516                 \{}
\DoxyCodeLine{15517                     \textcolor{comment}{// str 16}}
\DoxyCodeLine{15518                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xDA));}
\DoxyCodeLine{15519                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15520                 \}}
\DoxyCodeLine{15521                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15522                 \{}
\DoxyCodeLine{15523                     \textcolor{comment}{// str 32}}
\DoxyCodeLine{15524                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xDB));}
\DoxyCodeLine{15525                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15526                 \}}
\DoxyCodeLine{15527 }
\DoxyCodeLine{15528                 \textcolor{comment}{// step 2: write the string}}
\DoxyCodeLine{15529                 oa-\/>write\_characters(}
\DoxyCodeLine{15530                     \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }CharType*\textcolor{keyword}{>}(j.m\_data.m\_value.string-\/>c\_str()),}
\DoxyCodeLine{15531                     j.m\_data.m\_value.string-\/>size());}
\DoxyCodeLine{15532                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15533             \}}
\DoxyCodeLine{15534 }
\DoxyCodeLine{15535             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632af1f713c9e000f5d3f280adbd124df4f5}{value\_t::array}}:}
\DoxyCodeLine{15536             \{}
\DoxyCodeLine{15537                 \textcolor{comment}{// step 1: write control byte and the array size}}
\DoxyCodeLine{15538                 \textcolor{keyword}{const} \textcolor{keyword}{auto} \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} = j.m\_data.m\_value.array-\/>size();}
\DoxyCodeLine{15539                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= 15)}
\DoxyCodeLine{15540                 \{}
\DoxyCodeLine{15541                     \textcolor{comment}{// fixarray}}
\DoxyCodeLine{15542                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0x90 | \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15543                 \}}
\DoxyCodeLine{15544                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15545                 \{}
\DoxyCodeLine{15546                     \textcolor{comment}{// array 16}}
\DoxyCodeLine{15547                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xDC));}
\DoxyCodeLine{15548                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15549                 \}}
\DoxyCodeLine{15550                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15551                 \{}
\DoxyCodeLine{15552                     \textcolor{comment}{// array 32}}
\DoxyCodeLine{15553                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xDD));}
\DoxyCodeLine{15554                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15555                 \}}
\DoxyCodeLine{15556 }
\DoxyCodeLine{15557                 \textcolor{comment}{// step 2: write each element}}
\DoxyCodeLine{15558                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& el : *j.m\_data.m\_value.array)}
\DoxyCodeLine{15559                 \{}
\DoxyCodeLine{15560                     \mbox{\hyperlink{classdetail_1_1binary__writer_adc3dbefa80134d3530a1b3f1c9629586}{write\_msgpack}}(el);}
\DoxyCodeLine{15561                 \}}
\DoxyCodeLine{15562                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15563             \}}
\DoxyCodeLine{15564 }
\DoxyCodeLine{15565             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a9d7183f16acce70658f686ae7f1a4d20}{value\_t::binary}}:}
\DoxyCodeLine{15566             \{}
\DoxyCodeLine{15567                 \textcolor{comment}{// step 0: determine if the binary type has a set subtype to}}
\DoxyCodeLine{15568                 \textcolor{comment}{// determine whether or not to use the ext or fixext types}}
\DoxyCodeLine{15569                 \textcolor{keyword}{const} \textcolor{keywordtype}{bool} use\_ext = j.m\_data.m\_value.binary-\/>has\_subtype();}
\DoxyCodeLine{15570 }
\DoxyCodeLine{15571                 \textcolor{comment}{// step 1: write control byte and the byte string length}}
\DoxyCodeLine{15572                 \textcolor{keyword}{const} \textcolor{keyword}{auto} \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} = j.m\_data.m\_value.binary-\/>size();}
\DoxyCodeLine{15573                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint8\_t>::max)())}
\DoxyCodeLine{15574                 \{}
\DoxyCodeLine{15575                     std::uint8\_t output\_type\{\};}
\DoxyCodeLine{15576                     \textcolor{keywordtype}{bool} fixed = \textcolor{keyword}{true};}
\DoxyCodeLine{15577                     \textcolor{keywordflow}{if} (use\_ext)}
\DoxyCodeLine{15578                     \{}
\DoxyCodeLine{15579                         \textcolor{keywordflow}{switch} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}})}
\DoxyCodeLine{15580                         \{}
\DoxyCodeLine{15581                             \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{15582                                 output\_type = 0xD4; \textcolor{comment}{// fixext 1}}
\DoxyCodeLine{15583                                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15584                             \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{15585                                 output\_type = 0xD5; \textcolor{comment}{// fixext 2}}
\DoxyCodeLine{15586                                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15587                             \textcolor{keywordflow}{case} 4:}
\DoxyCodeLine{15588                                 output\_type = 0xD6; \textcolor{comment}{// fixext 4}}
\DoxyCodeLine{15589                                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15590                             \textcolor{keywordflow}{case} 8:}
\DoxyCodeLine{15591                                 output\_type = 0xD7; \textcolor{comment}{// fixext 8}}
\DoxyCodeLine{15592                                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15593                             \textcolor{keywordflow}{case} 16:}
\DoxyCodeLine{15594                                 output\_type = 0xD8; \textcolor{comment}{// fixext 16}}
\DoxyCodeLine{15595                                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15596                             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{15597                                 output\_type = 0xC7; \textcolor{comment}{// ext 8}}
\DoxyCodeLine{15598                                 fixed = \textcolor{keyword}{false};}
\DoxyCodeLine{15599                                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15600                         \}}
\DoxyCodeLine{15601 }
\DoxyCodeLine{15602                     \}}
\DoxyCodeLine{15603                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{15604                     \{}
\DoxyCodeLine{15605                         output\_type = 0xC4; \textcolor{comment}{// bin 8}}
\DoxyCodeLine{15606                         fixed = \textcolor{keyword}{false};}
\DoxyCodeLine{15607                     \}}
\DoxyCodeLine{15608 }
\DoxyCodeLine{15609                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(output\_type));}
\DoxyCodeLine{15610                     \textcolor{keywordflow}{if} (!fixed)}
\DoxyCodeLine{15611                     \{}
\DoxyCodeLine{15612                         write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15613                     \}}
\DoxyCodeLine{15614                 \}}
\DoxyCodeLine{15615                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15616                 \{}
\DoxyCodeLine{15617                     \textcolor{keyword}{const} std::uint8\_t output\_type = use\_ext}
\DoxyCodeLine{15618                                                      ? 0xC8 \textcolor{comment}{// ext 16}}
\DoxyCodeLine{15619                                                      : 0xC5; \textcolor{comment}{// bin 16}}
\DoxyCodeLine{15620 }
\DoxyCodeLine{15621                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(output\_type));}
\DoxyCodeLine{15622                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15623                 \}}
\DoxyCodeLine{15624                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15625                 \{}
\DoxyCodeLine{15626                     \textcolor{keyword}{const} std::uint8\_t output\_type = use\_ext}
\DoxyCodeLine{15627                                                      ? 0xC9 \textcolor{comment}{// ext 32}}
\DoxyCodeLine{15628                                                      : 0xC6; \textcolor{comment}{// bin 32}}
\DoxyCodeLine{15629 }
\DoxyCodeLine{15630                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(output\_type));}
\DoxyCodeLine{15631                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15632                 \}}
\DoxyCodeLine{15633 }
\DoxyCodeLine{15634                 \textcolor{comment}{// step 1.5: if this is an ext type, write the subtype}}
\DoxyCodeLine{15635                 \textcolor{keywordflow}{if} (use\_ext)}
\DoxyCodeLine{15636                 \{}
\DoxyCodeLine{15637                     write\_number(\textcolor{keyword}{static\_cast<}std::int8\_t\textcolor{keyword}{>}(j.m\_data.m\_value.binary-\/>subtype()));}
\DoxyCodeLine{15638                 \}}
\DoxyCodeLine{15639 }
\DoxyCodeLine{15640                 \textcolor{comment}{// step 2: write the byte string}}
\DoxyCodeLine{15641                 oa-\/>write\_characters(}
\DoxyCodeLine{15642                     \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }CharType*\textcolor{keyword}{>}(j.m\_data.m\_value.binary-\/>data()),}
\DoxyCodeLine{15643                     \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}});}
\DoxyCodeLine{15644 }
\DoxyCodeLine{15645                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15646             \}}
\DoxyCodeLine{15647 }
\DoxyCodeLine{15648             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632aa8cfde6331bd59eb2ac96f8911c4b666}{value\_t::object}}:}
\DoxyCodeLine{15649             \{}
\DoxyCodeLine{15650                 \textcolor{comment}{// step 1: write control byte and the object size}}
\DoxyCodeLine{15651                 \textcolor{keyword}{const} \textcolor{keyword}{auto} \mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} = j.m\_data.m\_value.object-\/>size();}
\DoxyCodeLine{15652                 \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= 15)}
\DoxyCodeLine{15653                 \{}
\DoxyCodeLine{15654                     \textcolor{comment}{// fixmap}}
\DoxyCodeLine{15655                     write\_number(\textcolor{keyword}{static\_cast<}std::uint8\_t\textcolor{keyword}{>}(0x80 | (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} \& 0xF)));}
\DoxyCodeLine{15656                 \}}
\DoxyCodeLine{15657                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint16\_t>::max)())}
\DoxyCodeLine{15658                 \{}
\DoxyCodeLine{15659                     \textcolor{comment}{// map 16}}
\DoxyCodeLine{15660                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xDE));}
\DoxyCodeLine{15661                     write\_number(\textcolor{keyword}{static\_cast<}std::uint16\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15662                 \}}
\DoxyCodeLine{15663                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}} <= (std::numeric\_limits<std::uint32\_t>::max)())}
\DoxyCodeLine{15664                 \{}
\DoxyCodeLine{15665                     \textcolor{comment}{// map 32}}
\DoxyCodeLine{15666                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(0xDF));}
\DoxyCodeLine{15667                     write\_number(\textcolor{keyword}{static\_cast<}std::uint32\_t\textcolor{keyword}{>}(\mbox{\hyperlink{addm__simulate_8cpp_a7722c8ecbb62d99aee7ce68b1752f337}{N}}));}
\DoxyCodeLine{15668                 \}}
\DoxyCodeLine{15669 }
\DoxyCodeLine{15670                 \textcolor{comment}{// step 2: write each element}}
\DoxyCodeLine{15671                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& el : *j.m\_data.m\_value.object)}
\DoxyCodeLine{15672                 \{}
\DoxyCodeLine{15673                     \mbox{\hyperlink{classdetail_1_1binary__writer_adc3dbefa80134d3530a1b3f1c9629586}{write\_msgpack}}(el.first);}
\DoxyCodeLine{15674                     \mbox{\hyperlink{classdetail_1_1binary__writer_adc3dbefa80134d3530a1b3f1c9629586}{write\_msgpack}}(el.second);}
\DoxyCodeLine{15675                 \}}
\DoxyCodeLine{15676                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15677             \}}
\DoxyCodeLine{15678 }
\DoxyCodeLine{15679             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a94708897ec9db8647dfe695714c98e46}{value\_t::discarded}}:}
\DoxyCodeLine{15680             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{15681                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15682         \}}
\DoxyCodeLine{15683     \}}

\end{DoxyCode}
\mbox{\Hypertarget{classdetail_1_1binary__writer_a972bec9688cbc5673bb482bbe9543e2a}\label{classdetail_1_1binary__writer_a972bec9688cbc5673bb482bbe9543e2a}} 
\index{detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}!write\_ubjson@{write\_ubjson}}
\index{write\_ubjson@{write\_ubjson}!detail::binary\_writer$<$ BasicJsonType, CharType $>$@{detail::binary\_writer$<$ BasicJsonType, CharType $>$}}
\doxysubsubsection{\texorpdfstring{write\_ubjson()}{write\_ubjson()}}
{\footnotesize\ttfamily template$<$typename Basic\+Json\+Type , typename Char\+Type $>$ \\
void \mbox{\hyperlink{classdetail_1_1binary__writer}{detail\+::binary\+\_\+writer}}$<$ Basic\+Json\+Type, Char\+Type $>$\+::write\+\_\+ubjson (\begin{DoxyParamCaption}\item[{const Basic\+Json\+Type \&}]{j,  }\item[{const bool}]{use\+\_\+count,  }\item[{const bool}]{use\+\_\+type,  }\item[{const bool}]{add\+\_\+prefix = {\ttfamily true},  }\item[{const bool}]{use\+\_\+bjdata = {\ttfamily false} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}


\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em j} & JSON value to serialize \\
\hline
\mbox{\texttt{ in}}  & {\em use\+\_\+count} & whether to use \textquotesingle{}\#\textquotesingle{} prefixes (optimized format) \\
\hline
\mbox{\texttt{ in}}  & {\em use\+\_\+type} & whether to use \textquotesingle{}\$\textquotesingle{} prefixes (optimized format) \\
\hline
\mbox{\texttt{ in}}  & {\em add\+\_\+prefix} & whether prefixes need to be used for this value \\
\hline
\mbox{\texttt{ in}}  & {\em use\+\_\+bjdata} & whether write in BJData format, default is false \\
\hline
\end{DoxyParams}


Definition at line 15692 of file json.\+hpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{15695     \{}
\DoxyCodeLine{15696         \textcolor{keywordflow}{switch} (j.type())}
\DoxyCodeLine{15697         \{}
\DoxyCodeLine{15698             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a37a6259cc0c1dae299a7866489dff0bd}{value\_t::null}}:}
\DoxyCodeLine{15699             \{}
\DoxyCodeLine{15700                 \textcolor{keywordflow}{if} (add\_prefix)}
\DoxyCodeLine{15701                 \{}
\DoxyCodeLine{15702                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'Z'}));}
\DoxyCodeLine{15703                 \}}
\DoxyCodeLine{15704                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15705             \}}
\DoxyCodeLine{15706 }
\DoxyCodeLine{15707             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a84e2c64f38f78ba3ea5c905ab5a2da27}{value\_t::boolean}}:}
\DoxyCodeLine{15708             \{}
\DoxyCodeLine{15709                 \textcolor{keywordflow}{if} (add\_prefix)}
\DoxyCodeLine{15710                 \{}
\DoxyCodeLine{15711                     oa-\/>write\_character(j.m\_data.m\_value.boolean}
\DoxyCodeLine{15712                                         ? \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'T'})}
\DoxyCodeLine{15713                                         : \mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'F'}));}
\DoxyCodeLine{15714                 \}}
\DoxyCodeLine{15715                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15716             \}}
\DoxyCodeLine{15717 }
\DoxyCodeLine{15718             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a5763da164f8659d94a56e29df64b4bcc}{value\_t::number\_integer}}:}
\DoxyCodeLine{15719             \{}
\DoxyCodeLine{15720                 write\_number\_with\_ubjson\_prefix(j.m\_data.m\_value.number\_integer, add\_prefix, use\_bjdata);}
\DoxyCodeLine{15721                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15722             \}}
\DoxyCodeLine{15723 }
\DoxyCodeLine{15724             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632adce7cc8ec29055c4158828921f2f265e}{value\_t::number\_unsigned}}:}
\DoxyCodeLine{15725             \{}
\DoxyCodeLine{15726                 write\_number\_with\_ubjson\_prefix(j.m\_data.m\_value.number\_unsigned, add\_prefix, use\_bjdata);}
\DoxyCodeLine{15727                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15728             \}}
\DoxyCodeLine{15729 }
\DoxyCodeLine{15730             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632ad9966ecb59667235a57b4b999a649eef}{value\_t::number\_float}}:}
\DoxyCodeLine{15731             \{}
\DoxyCodeLine{15732                 write\_number\_with\_ubjson\_prefix(j.m\_data.m\_value.number\_float, add\_prefix, use\_bjdata);}
\DoxyCodeLine{15733                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15734             \}}
\DoxyCodeLine{15735 }
\DoxyCodeLine{15736             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632ab45cffe084dd3d20d928bee85e7b0f21}{value\_t::string}}:}
\DoxyCodeLine{15737             \{}
\DoxyCodeLine{15738                 \textcolor{keywordflow}{if} (add\_prefix)}
\DoxyCodeLine{15739                 \{}
\DoxyCodeLine{15740                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'S'}));}
\DoxyCodeLine{15741                 \}}
\DoxyCodeLine{15742                 write\_number\_with\_ubjson\_prefix(j.m\_data.m\_value.string-\/>size(), \textcolor{keyword}{true}, use\_bjdata);}
\DoxyCodeLine{15743                 oa-\/>write\_characters(}
\DoxyCodeLine{15744                     \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }CharType*\textcolor{keyword}{>}(j.m\_data.m\_value.string-\/>c\_str()),}
\DoxyCodeLine{15745                     j.m\_data.m\_value.string-\/>size());}
\DoxyCodeLine{15746                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15747             \}}
\DoxyCodeLine{15748 }
\DoxyCodeLine{15749             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632af1f713c9e000f5d3f280adbd124df4f5}{value\_t::array}}:}
\DoxyCodeLine{15750             \{}
\DoxyCodeLine{15751                 \textcolor{keywordflow}{if} (add\_prefix)}
\DoxyCodeLine{15752                 \{}
\DoxyCodeLine{15753                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'['}));}
\DoxyCodeLine{15754                 \}}
\DoxyCodeLine{15755 }
\DoxyCodeLine{15756                 \textcolor{keywordtype}{bool} prefix\_required = \textcolor{keyword}{true};}
\DoxyCodeLine{15757                 \textcolor{keywordflow}{if} (use\_type \&\& !j.m\_data.m\_value.array-\/>empty())}
\DoxyCodeLine{15758                 \{}
\DoxyCodeLine{15759                     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(use\_count);}
\DoxyCodeLine{15760                     \textcolor{keyword}{const} CharType first\_prefix = ubjson\_prefix(j.front(), use\_bjdata);}
\DoxyCodeLine{15761                     \textcolor{keyword}{const} \textcolor{keywordtype}{bool} same\_prefix = std::all\_of(j.begin() + 1, j.end(),}
\DoxyCodeLine{15762                                                          [\textcolor{keyword}{this}, first\_prefix, use\_bjdata](\textcolor{keyword}{const} BasicJsonType \& v)}
\DoxyCodeLine{15763                     \{}
\DoxyCodeLine{15764                         return ubjson\_prefix(v, use\_bjdata) == first\_prefix;}
\DoxyCodeLine{15765                     \});}
\DoxyCodeLine{15766 }
\DoxyCodeLine{15767                     std::vector<CharType> bjdx = \{\textcolor{charliteral}{'['}, \textcolor{charliteral}{'\{'}, \textcolor{charliteral}{'S'}, \textcolor{charliteral}{'H'}, \textcolor{charliteral}{'T'}, \textcolor{charliteral}{'F'}, \textcolor{charliteral}{'N'}, \textcolor{charliteral}{'Z'}\}; \textcolor{comment}{// excluded markers in bjdata optimized type}}
\DoxyCodeLine{15768 }
\DoxyCodeLine{15769                     \textcolor{keywordflow}{if} (same\_prefix \&\& !(use\_bjdata \&\& std::find(bjdx.begin(), bjdx.end(), first\_prefix) != bjdx.end()))}
\DoxyCodeLine{15770                     \{}
\DoxyCodeLine{15771                         prefix\_required = \textcolor{keyword}{false};}
\DoxyCodeLine{15772                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'\$'}));}
\DoxyCodeLine{15773                         oa-\/>write\_character(first\_prefix);}
\DoxyCodeLine{15774                     \}}
\DoxyCodeLine{15775                 \}}
\DoxyCodeLine{15776 }
\DoxyCodeLine{15777                 \textcolor{keywordflow}{if} (use\_count)}
\DoxyCodeLine{15778                 \{}
\DoxyCodeLine{15779                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'\#'}));}
\DoxyCodeLine{15780                     write\_number\_with\_ubjson\_prefix(j.m\_data.m\_value.array-\/>size(), \textcolor{keyword}{true}, use\_bjdata);}
\DoxyCodeLine{15781                 \}}
\DoxyCodeLine{15782 }
\DoxyCodeLine{15783                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& el : *j.m\_data.m\_value.array)}
\DoxyCodeLine{15784                 \{}
\DoxyCodeLine{15785                     \mbox{\hyperlink{classdetail_1_1binary__writer_a972bec9688cbc5673bb482bbe9543e2a}{write\_ubjson}}(el, use\_count, use\_type, prefix\_required, use\_bjdata);}
\DoxyCodeLine{15786                 \}}
\DoxyCodeLine{15787 }
\DoxyCodeLine{15788                 \textcolor{keywordflow}{if} (!use\_count)}
\DoxyCodeLine{15789                 \{}
\DoxyCodeLine{15790                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{']'}));}
\DoxyCodeLine{15791                 \}}
\DoxyCodeLine{15792 }
\DoxyCodeLine{15793                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15794             \}}
\DoxyCodeLine{15795 }
\DoxyCodeLine{15796             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a9d7183f16acce70658f686ae7f1a4d20}{value\_t::binary}}:}
\DoxyCodeLine{15797             \{}
\DoxyCodeLine{15798                 \textcolor{keywordflow}{if} (add\_prefix)}
\DoxyCodeLine{15799                 \{}
\DoxyCodeLine{15800                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'['}));}
\DoxyCodeLine{15801                 \}}
\DoxyCodeLine{15802 }
\DoxyCodeLine{15803                 \textcolor{keywordflow}{if} (use\_type \&\& !j.m\_data.m\_value.binary-\/>empty())}
\DoxyCodeLine{15804                 \{}
\DoxyCodeLine{15805                     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(use\_count);}
\DoxyCodeLine{15806                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'\$'}));}
\DoxyCodeLine{15807                     oa-\/>write\_character(\textcolor{charliteral}{'U'});}
\DoxyCodeLine{15808                 \}}
\DoxyCodeLine{15809 }
\DoxyCodeLine{15810                 \textcolor{keywordflow}{if} (use\_count)}
\DoxyCodeLine{15811                 \{}
\DoxyCodeLine{15812                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'\#'}));}
\DoxyCodeLine{15813                     write\_number\_with\_ubjson\_prefix(j.m\_data.m\_value.binary-\/>size(), \textcolor{keyword}{true}, use\_bjdata);}
\DoxyCodeLine{15814                 \}}
\DoxyCodeLine{15815 }
\DoxyCodeLine{15816                 \textcolor{keywordflow}{if} (use\_type)}
\DoxyCodeLine{15817                 \{}
\DoxyCodeLine{15818                     oa-\/>write\_characters(}
\DoxyCodeLine{15819                         \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }CharType*\textcolor{keyword}{>}(j.m\_data.m\_value.binary-\/>data()),}
\DoxyCodeLine{15820                         j.m\_data.m\_value.binary-\/>size());}
\DoxyCodeLine{15821                 \}}
\DoxyCodeLine{15822                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{15823                 \{}
\DoxyCodeLine{15824                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{size\_t} i = 0; i < j.m\_data.m\_value.binary-\/>size(); ++i)}
\DoxyCodeLine{15825                     \{}
\DoxyCodeLine{15826                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'U'}));}
\DoxyCodeLine{15827                         oa-\/>write\_character(j.m\_data.m\_value.binary-\/>data()[i]);}
\DoxyCodeLine{15828                     \}}
\DoxyCodeLine{15829                 \}}
\DoxyCodeLine{15830 }
\DoxyCodeLine{15831                 \textcolor{keywordflow}{if} (!use\_count)}
\DoxyCodeLine{15832                 \{}
\DoxyCodeLine{15833                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{']'}));}
\DoxyCodeLine{15834                 \}}
\DoxyCodeLine{15835 }
\DoxyCodeLine{15836                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15837             \}}
\DoxyCodeLine{15838 }
\DoxyCodeLine{15839             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632aa8cfde6331bd59eb2ac96f8911c4b666}{value\_t::object}}:}
\DoxyCodeLine{15840             \{}
\DoxyCodeLine{15841                 \textcolor{keywordflow}{if} (use\_bjdata \&\& j.m\_data.m\_value.object-\/>size() == 3 \&\& j.m\_data.m\_value.object-\/>find(\textcolor{stringliteral}{"{}\_ArrayType\_"{}}) != j.m\_data.m\_value.object-\/>end() \&\& j.m\_data.m\_value.object-\/>find(\textcolor{stringliteral}{"{}\_ArraySize\_"{}}) != j.m\_data.m\_value.object-\/>end() \&\& j.m\_data.m\_value.object-\/>find(\textcolor{stringliteral}{"{}\_ArrayData\_"{}}) != j.m\_data.m\_value.object-\/>end())}
\DoxyCodeLine{15842                 \{}
\DoxyCodeLine{15843                     \textcolor{keywordflow}{if} (!write\_bjdata\_ndarray(*j.m\_data.m\_value.object, use\_count, use\_type))  \textcolor{comment}{// decode bjdata ndarray in the JData format (https://github.com/NeuroJSON/jdata)}}
\DoxyCodeLine{15844                     \{}
\DoxyCodeLine{15845                         \textcolor{keywordflow}{break};}
\DoxyCodeLine{15846                     \}}
\DoxyCodeLine{15847                 \}}
\DoxyCodeLine{15848 }
\DoxyCodeLine{15849                 \textcolor{keywordflow}{if} (add\_prefix)}
\DoxyCodeLine{15850                 \{}
\DoxyCodeLine{15851                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'\{'}));}
\DoxyCodeLine{15852                 \}}
\DoxyCodeLine{15853 }
\DoxyCodeLine{15854                 \textcolor{keywordtype}{bool} prefix\_required = \textcolor{keyword}{true};}
\DoxyCodeLine{15855                 \textcolor{keywordflow}{if} (use\_type \&\& !j.m\_data.m\_value.object-\/>empty())}
\DoxyCodeLine{15856                 \{}
\DoxyCodeLine{15857                     \mbox{\hyperlink{json_8hpp_a69f131cff49da1989667220173fbeae6}{JSON\_ASSERT}}(use\_count);}
\DoxyCodeLine{15858                     \textcolor{keyword}{const} CharType first\_prefix = ubjson\_prefix(j.front(), use\_bjdata);}
\DoxyCodeLine{15859                     \textcolor{keyword}{const} \textcolor{keywordtype}{bool} same\_prefix = std::all\_of(j.begin(), j.end(),}
\DoxyCodeLine{15860                                                          [\textcolor{keyword}{this}, first\_prefix, use\_bjdata](\textcolor{keyword}{const} BasicJsonType \& v)}
\DoxyCodeLine{15861                     \{}
\DoxyCodeLine{15862                         return ubjson\_prefix(v, use\_bjdata) == first\_prefix;}
\DoxyCodeLine{15863                     \});}
\DoxyCodeLine{15864 }
\DoxyCodeLine{15865                     std::vector<CharType> bjdx = \{\textcolor{charliteral}{'['}, \textcolor{charliteral}{'\{'}, \textcolor{charliteral}{'S'}, \textcolor{charliteral}{'H'}, \textcolor{charliteral}{'T'}, \textcolor{charliteral}{'F'}, \textcolor{charliteral}{'N'}, \textcolor{charliteral}{'Z'}\}; \textcolor{comment}{// excluded markers in bjdata optimized type}}
\DoxyCodeLine{15866 }
\DoxyCodeLine{15867                     \textcolor{keywordflow}{if} (same\_prefix \&\& !(use\_bjdata \&\& std::find(bjdx.begin(), bjdx.end(), first\_prefix) != bjdx.end()))}
\DoxyCodeLine{15868                     \{}
\DoxyCodeLine{15869                         prefix\_required = \textcolor{keyword}{false};}
\DoxyCodeLine{15870                         oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'\$'}));}
\DoxyCodeLine{15871                         oa-\/>write\_character(first\_prefix);}
\DoxyCodeLine{15872                     \}}
\DoxyCodeLine{15873                 \}}
\DoxyCodeLine{15874 }
\DoxyCodeLine{15875                 \textcolor{keywordflow}{if} (use\_count)}
\DoxyCodeLine{15876                 \{}
\DoxyCodeLine{15877                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'\#'}));}
\DoxyCodeLine{15878                     write\_number\_with\_ubjson\_prefix(j.m\_data.m\_value.object-\/>size(), \textcolor{keyword}{true}, use\_bjdata);}
\DoxyCodeLine{15879                 \}}
\DoxyCodeLine{15880 }
\DoxyCodeLine{15881                 \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto}\& el : *j.m\_data.m\_value.object)}
\DoxyCodeLine{15882                 \{}
\DoxyCodeLine{15883                     write\_number\_with\_ubjson\_prefix(el.first.size(), \textcolor{keyword}{true}, use\_bjdata);}
\DoxyCodeLine{15884                     oa-\/>write\_characters(}
\DoxyCodeLine{15885                         \textcolor{keyword}{reinterpret\_cast<}\textcolor{keyword}{const }CharType*\textcolor{keyword}{>}(el.first.c\_str()),}
\DoxyCodeLine{15886                         el.first.size());}
\DoxyCodeLine{15887                     \mbox{\hyperlink{classdetail_1_1binary__writer_a972bec9688cbc5673bb482bbe9543e2a}{write\_ubjson}}(el.second, use\_count, use\_type, prefix\_required, use\_bjdata);}
\DoxyCodeLine{15888                 \}}
\DoxyCodeLine{15889 }
\DoxyCodeLine{15890                 \textcolor{keywordflow}{if} (!use\_count)}
\DoxyCodeLine{15891                 \{}
\DoxyCodeLine{15892                     oa-\/>write\_character(\mbox{\hyperlink{classdetail_1_1binary__writer_a2822d4a58bbb0dc2198686da430e8906}{to\_char\_type}}(\textcolor{charliteral}{'\}'}));}
\DoxyCodeLine{15893                 \}}
\DoxyCodeLine{15894 }
\DoxyCodeLine{15895                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15896             \}}
\DoxyCodeLine{15897 }
\DoxyCodeLine{15898             \textcolor{keywordflow}{case} \mbox{\hyperlink{namespacedetail_a917c3efabea8a20dc72d9ae2c673d632a94708897ec9db8647dfe695714c98e46}{value\_t::discarded}}:}
\DoxyCodeLine{15899             \textcolor{keywordflow}{default}:}
\DoxyCodeLine{15900                 \textcolor{keywordflow}{break};}
\DoxyCodeLine{15901         \}}
\DoxyCodeLine{15902     \}}

\end{DoxyCode}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
include/nlohmann/\mbox{\hyperlink{json_8hpp}{json.\+hpp}}\end{DoxyCompactItemize}
